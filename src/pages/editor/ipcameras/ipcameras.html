<!--
  Generated template for the Ipcameras page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-shadow>

  <ion-toolbar color="primary">
    <ion-buttons start>
      <button ion-button icon-only [disabled]="isRecording" (click)="loadIPCams()"><ion-icon name="refresh"></ion-icon></button>
    </ion-buttons>
    <ion-title>IP Cams Capture</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="dismiss()"><ion-icon name="close"></ion-icon></button>
    </ion-buttons>
  </ion-toolbar>

</ion-header>


<ion-content style="background:#eeeeee;" style="position: relative;">
  <ion-row>
    <ion-col center style="width:auto;flex:0 0 auto;min-width:160px;">
      <b item-left>Rec. Duration </b>
      <ion-badge>{{recordingDuration}} sec</ion-badge>
    </ion-col>
    <ion-col center style="width:100%;">
      <ion-range min="5" max="45" step="5" snaps="true" [(ngModel)]="recordingDuration" style="padding:0;">
        <ion-label range-left>5s</ion-label>
        <ion-label range-right>45s</ion-label>
      </ion-range>
    </ion-col>
  </ion-row>
  <div class="items">
    <div class="item" *ngFor="let cam of ipCams;let i = index">
      <b margin-horizontal>{{cam._IPAdd}}</b>
      <ion-card>
        <img src="assets/sample.jpg" style="max-height:350px;" />
        <img [attr.src]="getIPCamPreview(cam._IPAdd)" style="max-height:350px;background-color: #cccccc;background-image: url(assets/sample.jpg);background-size: cover;background-position: center;"
        />
      </ion-card>
    </div>
  </div>

  <ion-row center *ngIf="ipCams.length==0" style="position: absolute;top:40%; color: gray;">
    <ion-col text-center center>
      <b>No IP Camera found</b>
    </ion-col>
  </ion-row>

  <ion-fab bottom left (click)="presentSettingsModal()">
    <button ion-fab mini><ion-icon name="md-settings"></ion-icon></button>
  </ion-fab>
  <ion-fab bottom center>
    <button ion-fab color="danger" [disabled]="ipCams.length==0 || isRecording" (click)="startRecording()"><ion-icon name="radio-button-on"></ion-icon></button>
  </ion-fab>
  <ion-fab bottom right>
    <button ion-fab mini (click)="timerONOFF()" [style.opacity]="timerButtonOpacity"><ion-icon name="timer"></ion-icon></button>
  </ion-fab>
</ion-content>