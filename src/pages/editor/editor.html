<!--
  Generated template for the Editor page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
	<ion-navbar>
		<ion-title>{{matrix.Title}}</ion-title>
		<ion-buttons end>
			<button ion-button icon-only><ion-icon name="cloud-upload"></ion-icon></button>
			<button ion-button icon-only [disabled]="false"><ion-icon name="share"></ion-icon></button>
		</ion-buttons>
	</ion-navbar>
	<ion-toolbar no-border-top>
		<ion-row>
			<ion-col style="width:50px;flex: 0 0 50px;padding:0;">
				<button ion-button icon-only clear color="primary" (click)="presentInfoModal()"><ion-icon name="list-box"></ion-icon></button>
			</ion-col>
			<ion-col style="width:100%;padding:0;">
				<ion-segment [(ngModel)]="selectedViewIndex">
					<ion-segment-button *ngFor="let view of views; let i = index" [value]="i" (click)="showSegment(i)" (press)="deleteView(i)">
						{{view.Title}}
					</ion-segment-button>
				</ion-segment>
			</ion-col>
			<ion-col style="width:50px;flex: 0 0 50px;padding:0;">
				<button ion-button icon-only clear color="primary" (click)="addView()"><ion-icon name="add-circle"></ion-icon></button>
			</ion-col>
		</ion-row>
	</ion-toolbar>

</ion-header>


<ion-content style="background:#eee;overflow:hidden">

	<!--viewContainer-->

	<!--viewOptions-->
	<ion-row *ngIf="ifViewOptions" style="height:100%;">
		<ion-col center text-center>
			<ion-card style="width:100%;">
				<ion-card-header>Choose view type..</ion-card-header>
				<ion-list>
					<button ion-item (click)="defineView('Canvas')"><ion-icon name="easel" item-left></ion-icon>Blank Canvas</button>
					<button ion-item (click)="defineView('Local')"><ion-icon name="ios-film" item-left></ion-icon>Add Video</button>
					<button ion-item (click)="defineView('Camera')"><ion-icon name="videocam" item-left></ion-icon>Record Video</button>
					<button ion-item (click)="importFromLibrary()"><ion-icon name="log-in" item-left></ion-icon>Import from library</button>
				</ion-list>
			</ion-card>
		</ion-col>
	</ion-row>
	<!--ViewCanvasTemplate-->
	<ion-row *ngIf="ifViewCanvas" style="height: 100%;">
		<ion-col>
			<svg height="100%" width="100%" style="background:#fff;border:1px solid lightgray;" viewBox="0 0 1920 1080" preserveAspectRatio="none">
				<ellipse cx="400" cy="400" rx="100" ry="50" fill="orange" stroke="black" stroke-width="2" opacity="0.8" />
				<rect x="30" y="50" width="300" height="100" fill="orange" stroke="black" stroke-width="2" opacity="0.8" />
				<line x1="40" y1="170" x2="200" y2="200" stroke="black" stroke-width="2" opacity="0.8" />
				<text x="50" y="300" fill="orange" stroke="black" stroke-width="2" opacity="0.8" font-size="22">Canvas</text>
				<image x="350" y="20" width="300" height="150" xlink:href="assets/sample.jpg" />
				<!--Arrow-->
				<defs>
					<marker id="arrow" markerWidth="10" markerHeight="10" refx="0" refy="3" orient="auto" markerUnits="strokeWidth">
						<path d="M0,0 L0,6 L9,3 z" fill="orange" />
					</marker>
				</defs>
				<line #arrow x1="50" y1="450" x2="250" y2="550" stroke="orange" stroke-width="5" marker-end="url(#arrow)" />
				<!--InkCanvasImage-->
				<image #Ink x="0" y="0" width="100%" height="100%" xlink:href="assets/defe52abcadf4ca085466f9845f666b6.gif" />
				<foreignObject x="700" y="300" width="405" height="300" style="background-color:green">
					<xhtml:video src="assets/sample.mp4" loop="true" autoplay x="0" y="0" width="305" height="400" controls></xhtml:video>
				</foreignObject>
				<foreignObject x="600" y="100" width="433" height="80" style="background-color:green">
					<xhtml:audio src="assets/sample.mp3" loop="true" style="background-color:orange" autoplay x="0" y="0" width="305" height="200"
						controls></xhtml:audio>
				</foreignObject>

			</svg>
		</ion-col>
	</ion-row>
	<!--ViewVideoTemplate-->
	<ion-row *ngIf="ifViewVideo" style="height: 100%;background:#444;">
		<ion-col style="padding:0px">
			<ion-grid style="height: 100%;background:#000;padding:0px">
				<ion-row style="height: 100%;">
					<video id="video" #video src="assets/sample.mp4" width="100%" height="100%" loop="true"></video>
					<!--<svg height="100%" width="100%" style="position: absolute;margin-bottom:100px" viewBox="0 0 1280 720">
						<ellipse cx="400" cy="400" rx="100" ry="50" fill="orange" stroke="black" stroke-width="2" opacity="0.8" />
						<rect x="30" y="50" width="300" height="100" fill="orange" stroke="black" stroke-width="2" opacity="0.8" />
						<line x1="40" y1="170" x2="200" y2="200" stroke="black" stroke-width="2" opacity="0.8" />
						<text x="50" y="300" fill="orange" stroke="black" stroke-width="2" opacity="0.8" font-size="22">Canvas</text>
						<image x="350" y="20" width="300" height="150" xlink:href="assets/sample.jpg" />-->
					<!--Arrow-->
					<!--<defs>
							<marker id="arrow" markerWidth="10" markerHeight="10" refx="0" refy="3" orient="auto" markerUnits="strokeWidth">
								<path d="M0,0 L0,6 L9,3 z" fill="orange" />
							</marker>
						</defs>
						<line #arrow x1="50" y1="450" x2="250" y2="550" stroke="orange" stroke-width="5" marker-end="url(#arrow)" />-->
					<!--InkCanvasImage-->
					<!--<image #Ink x="0" y="0" width="100%" height="100%" xlink:href="assets/defe52abcadf4ca085466f9845f666b6.gif" />
					</svg>-->
				</ion-row>

				<ion-row padding-left padding-right padding-bottom style="background:#333; height: auto; flex: 0 0 auto;">
					<ion-col no-padding>
						<ion-grid no-padding>
							<ion-row no-padding>
								<ion-col #markersContainer no-padding (window:resize)="onResize($event)" style="height:28px;">
									<button ion-button icon-only clear [class.markerselected]="marker.checked" color="light" *ngFor="let marker of markers;let i = index"
										[style.left]="evaluateMarkerPosition(marker.position)" style="width:18px;height:26px;margin:0 -9px;" (click)="updateSelection(i)"
										(press)="deleteMarker(i)">
										<ion-icon name="pin"></ion-icon>
										</button>
								</ion-col>
							</ion-row>
							<ion-row no-padding>
								<ion-col no-padding>
									<ion-range style="padding:0;height:25px" min="0" max="100000" step="0.01" [(ngModel)]="sliderValue" (ionChange)="captureController('sliderValueChange')"></ion-range>
								</ion-col>
							</ion-row>
							<ion-row no-padding>
								<ion-col no-padding center style="width:auto;flex: 0 0 auto;">
									<button no-margin ion-button icon-only clear small color="light" (click)="captureController('playPause')"><ion-icon name="{{playPauseButtonIcon}}"></ion-icon></button>
								</ion-col>
								<ion-col no-padding center style="width:auto;flex: 0 0 auto;">
									<button no-margin ion-button icon-only clear small color="{{repeatColor}}" (click)="captureController('repeatVideo')"><ion-icon name="repeat"></ion-icon></button>
								</ion-col>
								<ion-col no-padding center width="100%" style="min-width:100px;color:white;">
									{{timelinePosition}} / {{timelineDuration}}
								</ion-col>
								<ion-col no-padding center style="width:auto;flex: 0 0 auto;">
									<button no-margin ion-button icon-only clear small color="light" (click)="captureController('previousVideoFrame')"><ion-icon name="rewind"></ion-icon></button>
								</ion-col>
								<ion-col no-padding center style="width:auto;flex: 0 0 auto;">
									<button no-margin ion-button icon-only clear small color="light" (click)="captureController('nextVideoFrame')"><ion-icon name="fastforward"></ion-icon></button>
								</ion-col>
								<ion-col no-padding center text-center style="width:auto;flex: 0 0 auto;">
									<button no-margin ion-button icon-only clear small color="light" (click)="captureController('playbackRateVideo')" style="width:50px;">{{video.playbackRate}} x</button>
								</ion-col>
								<ion-col no-padding center style="width:auto;flex: 0 0 auto;">
									<button no-margin ion-button icon-only clear small color="light" (click)="captureController('MuteVideo')"> <ion-icon name="{{volumeButtonIcon}}"></ion-icon></button>
								</ion-col>
								<ion-col no-padding center style="width:auto;flex: 0 0 auto;">
									<ion-range style="height:20px; padding:0;width:50px;margin:0 10px" [(ngModel)]="volumeValue" (ionChange)="captureController('volumeValueChange')"></ion-range>
								</ion-col>
							</ion-row>
						</ion-grid>
					</ion-col>
					<ion-col no-padding center text-center padding-left style="width:auto;flex:0 0 auto;">
						<ion-row no-padding>
							<ion-col text-center>
								<button ion-fab color="dark" (click)="addMarker()">
							<ion-icon name="pin"></ion-icon>
							</button>
							</ion-col>
						</ion-row>
						<ion-row no-padding>
							<ion-col no-padding text-center style="color:white;font-size:10px;">
								Add Marker
							</ion-col>
						</ion-row>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ion-col>
	</ion-row>
</ion-content>


<!--<ion-footer>
  <ion-toolbar>

  </ion-toolbar>
</ion-footer>-->